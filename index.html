<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOC TOC TOC - Oficial</title>
    <style>
        :root { 
            --primary: #00796b; 
            --secundary: #004d40; 
            --admin: #263238; 
            --bg: #f4f7f6; 
            --child: #00bcd4;
            --alert: #d32f2f;
            --report: #ff9800;
        }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); margin: 0; display: flex; justify-content: center; min-height: 100vh; }
        
        .container { 
            width: 100%; 
            max-width: 500px; 
            background: #fff; 
            padding: 30px; 
            border-radius: 20px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); 
            margin: 20px; 
            text-align: center; 
            display: flex;
            flex-direction: column;
        }

        .conteudo { flex-grow: 1; min-height: 450px; }
        .tela { display: none; animation: fadeIn 0.3s; }
        .ativa { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        h2 { color: var(--primary); margin-bottom: 20px; text-transform: uppercase; font-size: 1.2rem; }
        h3 { color: #555; font-size: 15px; margin-top: 15px; }
        
        .menu-inicial { display: grid; gap: 12px; margin-top: 20px; }
        
        input, select { width: 100%; padding: 14px; margin: 8px 0; border: 1px solid #ccc; border-radius: 10px; box-sizing: border-box; font-size: 14px; }
        label { display: block; text-align: left; font-size: 12px; font-weight: bold; margin-top: 12px; color: #666; }
        
        button { width: 100%; padding: 16px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; transition: 0.3s; margin-top: 8px; text-transform: uppercase; font-size: 13px; }
        
        .btn-child { background: var(--child); color: white; font-size: 1rem; box-shadow: 0 4px 15px rgba(0, 188, 212, 0.4); border: 2px solid #fff; }
        .btn-resp { background: var(--primary); color: white; }
        .btn-prof { background: #546e7a; color: white; }
        .btn-report { background: var(--report); color: white; }
        .btn-admin { background: var(--admin); color: white; font-size: 10px; margin-top: 40px; opacity: 0.5; }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .btn-card { border: 2px solid #eee; border-radius: 18px; padding: 15px; cursor: pointer; background: #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.2s; }
        .btn-card:active { transform: scale(0.92); border-color: var(--primary); }
        .btn-card img { width: 80px; height: 80px; object-fit: contain; }
        .btn-card p { font-size: 11px; font-weight: bold; margin: 8px 0 0; color: #555; }

        .footer { margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; font-size: 12px; color: #888; line-height: 1.6; }
        .footer strong { color: var(--primary); }
        .footer a { color: var(--child); text-decoration: none; font-weight: bold; }
        
        .log-item { border-left: 5px solid var(--primary); background: #f9f9f9; padding: 12px; margin-bottom: 10px; border-radius: 0 10px 10px 0; text-align: left; font-size: 13px; }
        .gestor-table { width: 100%; border-collapse: collapse; font-size: 11px; margin-top: 15px; }
        .gestor-table th, .gestor-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    </style>
</head>
<body>

<div class="container">
    <div class="conteudo">
        
        <div id="menu" class="tela ativa">
            <h2 style="letter-spacing: 3px;">TOC TOC TOC</h2>
            <p style="font-size: 13px; color: #777;">Plataforma de Diagnóstico e Proteção</p>
            <div class="menu-inicial">
                <button class="btn-resp" onclick="ir('cadastro_pai')">Cadastro Responsável</button>
                <button class="btn-prof" onclick="ir('cadastro_prof')">Cadastro Profissional</button>
                <button class="btn-report" onclick="ir('login_pais')">Acesso dos Pais / Relatórios</button>
                <button class="btn-prof" style="background: #37474f;" onclick="ir('login_prof_acesso')">Acompanhamento Escolar</button>
                <button class="btn-admin" onclick="ir('login_admin')">Gestor do Sistema</button>
            </div>
        </div>

        <div id="cadastro_pai" class="tela">
            <h2>Novo Responsável</h2>
            <input type="text" id="p_nome" placeholder="Seu Nome Completo">
            <input type="text" id="p_cpf" placeholder="Seu CPF (Apenas números)">
            <input type="tel" id="p_zap" placeholder="WhatsApp">
            <input type="email" id="p_email" placeholder="E-mail">
            <input type="text" id="c_nome" placeholder="Apelido da Criança">
            <input type="password" id="p_senha" placeholder="Crie uma Senha">
            <button class="btn-resp" onclick="salvar('pai')">Finalizar Cadastro</button>
            <button onclick="ir('menu')">Voltar</button>
        </div>

        <div id="cadastro_prof" class="tela">
            <h2>Novo Profissional</h2>
            <input type="text" id="prof_nome" placeholder="Nome Completo">
            <input type="text" id="prof_cpf" placeholder="CPF">
            <select id="prof_relacao">
                <option value="">Sua função...</option>
                <option value="Professor">Professor(a)</option>
                <option value="Diretor">Diretor(a)</option>
                <option value="Terapeuta">Terapeuta</option>
                <option value="Psicologo">Psicólogo(a)</option>
            </select>
            <input type="password" id="prof_senha" placeholder="Crie uma Senha">
            <button class="btn-prof" onclick="salvar('prof')">Cadastrar Profissional</button>
            <button onclick="ir('menu')">Voltar</button>
        </div>

        <div id="login_pais" class="tela">
            <h2>Acesso dos Pais</h2>
            <input type="text" id="login_cpf" placeholder="CPF">
            <input type="password" id="login_senha" placeholder="Senha">
            <button class="btn-report" onclick="acessarRelatorio()">Entrar no Painel</button>
            <button onclick="ir('menu')">Voltar</button>
        </div>

        <div id="painel_pais" class="tela">
            <h2>Painel do Responsável</h2>
            <button class="btn-child" onclick="ir('humor_inicial')">ENTREGAR CELULAR PARA CRIANÇA</button>
            <hr style="margin: 25px 0; border: 0.5px solid #eee;">
            <h3>Histórico de Interações</h3>
            <div id="lista_relatorios" style="max-height: 250px; overflow-y: auto;"></div>
            <button class="btn-resp" onclick="ir('menu')" style="margin-top:20px;">Sair</button>
        </div>

        <div id="humor_inicial" class="tela">
            <h2>Como o Tatu está agora?</h2>
            <div class="grid">
                <div class="btn-card" onclick="setHumor('FELIZ')"><img src="tatu_feliz.png"><p>FELIZ</p></div>
                <div class="btn-card" onclick="setHumor('TRISTE')"><img src="tatu_triste.png"><p>TRISTE</p></div>
                <div class="btn-card" onclick="setHumor('NORMAL')"><img src="tatu_neutro.png"><p>NORMAL</p></div>
                <div class="btn-card" onclick="setHumor('ISOLADA')"><img src="tatu_enrolado.png"><p>ISOLADA</p></div>
            </div>
        </div>

        <div id="motivo_feliz" class="tela">
            <h2>O que deixou o Tatu feliz?</h2>
            <div class="grid">
                <div class="btn-card" onclick="finalizarRelato('Brincou no pátio')"><img src="patio.png"><p>PÁTIO</p></div>
                <div class="btn-card" onclick="finalizarRelato('Foi elogiado')"><img src="tatu_feliz.png"><p>ELOGIO</p></div>
                <div class="btn-card" onclick="finalizarRelato('Ganhou presente')"><img src="tatu_feliz.png"><p>PRESENTE</p></div>
                <div class="btn-card" onclick="finalizarRelato('Comeu algo bom')"><img src="tatu_feliz.png"><p>COMIDA</p></div>
            </div>
        </div>

        <div id="motivo_triste" class="tela">
            <h2>O que aconteceu com o Tatu?</h2>
            <div class="grid">
                <div class="btn-card" onclick="ir('tela_castigo')"><p>CASTIGO</p></div>
                <div class="btn-card" onclick="setAgente('RIRAM DE MIM', 'tela_agentes')"><img src="grupo_bullying.png"><p>RIRAM DE MIM</p></div>
                <div class="btn-card" onclick="setAgente('ISOLADA/IGNORADA', 'tela_agentes')"><img src="grupo_sozinho.png"><p>ISOLADA</p></div>
                <div class="btn-card" onclick="setAgente('AGREDIRAM/MACHUCARAM', 'tela_agentes')"><img src="sensacao_raio.png"><p>MACHUCARAM</p></div>
            </div>
        </div>

        <div id="tela_castigo" class="tela">
            <h2>Onde foi o castigo?</h2>
            <button class="btn-prof" onclick="ir('tela_porta')">Fora da Sala</button>
            <button class="btn-prof" onclick="ir('tela_castigo_interna')">Na frente da sala</button>
        </div>

        <div id="tela_porta" class="tela">
            <h2>Como estava a porta?</h2>
            <div class="grid">
                <div class="btn-card" onclick="finalizarRelato('Fora da sala - Porta Aberta')"><img src="porta_aberta.png"><p>ABERTA</p></div>
                <div class="btn-card" onclick="finalizarRelato('Fora da sala - Porta FECHADA')"><img src="porta_fechada.png"><p>FECHADA</p></div>
            </div>
        </div>

        <div id="tela_castigo_interna" class="tela">
            <h2>No castigo dentro da sala...</h2>
            <button class="btn-resp" onclick="finalizarRelato('No castigo - Outros riram')">As crianças riram</button>
            <button class="btn-resp" onclick="finalizarRelato('No castigo - Professora brava')">A professora estava brava</button>
        </div>

        <div id="tela_agentes" class="tela">
            <h2>Quem estava lá?</h2>
            <div class="grid">
                <div class="btn-card" onclick="setSentimentoCorpo('Professora')"><img src="professora.png"><p>PROFESSORA</p></div>
                <div class="btn-card" onclick="setSentimentoCorpo('Colegas')"><img src="grupo_unido.png"><p>COLEGAS</p></div>
                <div class="btn-card" onclick="setSentimentoCorpo('Não conheço')"><p>NÃO CONHEÇO</p></div>
                <div class="btn-card" onclick="setSentimentoCorpo('Sigilo')"><p>NÃO POSSO FALAR</p></div>
            </div>
        </div>

        <div id="tela_corpo" class="tela">
            <h2>O que você sentiu?</h2>
            <div class="grid">
                <div class="btn-card" onclick="finalizarRelato('Senti nó na garganta')"><img src="sensacao_no.png"><p>NÓ NA GARGANTA</p></div>
                <div class="btn-card" onclick="finalizarRelato('Senti raiva')"><img src="sensacao_raio.png"><p>RAIVA</p></div>
                <div class="btn-card" onclick="finalizarRelato('Senti choro')"><img src="sensacao_lagrimas.png"><p>CHORO</p></div>
                <div class="btn-card" onclick="finalizarRelato('Senti dor')"><img src="tatu_triste.png"><p>DOR</p></div>
            </div>
        </div>

        <div id="login_prof_acesso" class="tela">
            <h2>Login Profissional</h2>
            <input type="text" id="prof_login_cpf" placeholder="CPF">
            <input type="password" id="prof_login_senha" placeholder="Senha">
            <button class="btn-prof" onclick="acessarAcompanhamento()">Abrir Diário Escolar</button>
            <button onclick="ir('menu')">Voltar</button>
        </div>

        <div id="tela_acompanhamento" class="tela">
            <h2>Observação Clínica/Escolar</h2>
            <div style="text-align: left; background: #fafafa; padding: 15px; border-radius: 15px;">
                <label>Dificuldade em manter conversas?</label>
                <select id="obs_conversa"><option value="Sim">Sim</option><option value="Não">Não</option></select>
                <label>Contato Visual:</label>
                <select id="obs_visual"><option value="Fugaz">Fugaz</option><option value="Fixo">Fixo</option><option value="Inexistente">Inexistente</option></select>
                <label>Isolamento no recreio?</label>
                <select id="obs_isolamento"><option value="Sim">Sim</option><option value="Não">Não</option><option value="Não sei">Não sei</option></select>
                <label>Hipersensibilidade a sons/toque?</label>
                <select id="obs_hiper"><option value="Sim">Sim</option><option value="Não">Não</option><option value="Não sei">Não sei</option></select>
                <label>Comportamento desafiador?</label>
                <select id="obs_desafiador"><option value="Sim">Sim</option><option value="Não">Não</option><option value="Não sei">Não sei</option></select>
            </div>
            <button class="btn-prof" onclick="salvarAcompanhamento()">Salvar Dados</button>
            <button onclick="ir('menu')">Cancelar</button>
        </div>

        <div id="tela_alerta_prof" class="tela">
            <div style="background:#fff3f3; padding:20px; border-radius:15px; border:2px solid var(--alert); color: var(--alert);">
                <h3>ALERTA DE CAPACITAÇÃO</h3>
                <p>Você marcou "Não Sei" em muitos itens fundamentais. Recomendamos reciclagem e maior observação dos alunos.</p>
            </div>
            <button class="btn-prof" onclick="ir('menu')">Entendido</button>
        </div>

        <div id="login_admin" class="tela">
            <h2>Painel Gestor</h2>
            <input type="password" id="admin_key" placeholder="Senha Mestra">
            <button class="btn-admin" onclick="acessarAdmin()">Acessar</button>
            <button onclick="ir('menu')">Sair</button>
        </div>

        <div id="painel_admin" class="tela">
            <h2>Cadastros no Sistema</h2>
            <table class="gestor-table" id="tabela_admin">
                <thead><tr><th>Tipo</th><th>Nome</th><th>ID</th></tr></thead>
                <tbody></tbody>
            </table>
            <button onclick="ir('menu')" style="margin-top:20px;">Fechar</button>
        </div>

    </div>

    <div class="footer">
        Desenvolvido por <strong>MongBeach</strong><br>
        <a href="https://instagram.com/mong.beach" target="_blank">Instagram: @mong.beach</a><br>
        <a href="https://wa.me/5513991753601">WhatsApp: (13) 99175-3601</a>
    </div>

</div>

<script>
    let tempRelato = {};

    function ir(id) {
        document.querySelectorAll('.tela').forEach(t => t.classList.remove('ativa'));
        document.getElementById(id).classList.add('ativa');
        window.scrollTo(0,0);
    }

    function salvar(tipo) {
        let dados = JSON.parse(localStorage.getItem('toctoc_usuarios')) || [];
        let u = { 
            tipo: tipo, 
            nome: document.getElementById(tipo==='pai'?'p_nome':'prof_nome').value, 
            identificacao: document.getElementById(tipo==='pai'?'p_cpf':'prof_cpf').value, 
            senha: document.getElementById(tipo==='pai'?'p_senha':'prof_senha').value 
        };
        if(!u.nome || !u.identificacao || !u.senha) return alert("Preencha todos os campos.");
        dados.push(u);
        localStorage.setItem('toctoc_usuarios', JSON.stringify(dados));
        alert('Cadastro efetuado!'); ir('menu');
    }

    function acessarRelatorio() {
        const cpf = document.getElementById('login_cpf').value;
        const pass = document.getElementById('login_senha').value;
        const usuarios = JSON.parse(localStorage.getItem('toctoc_usuarios')) || [];
        const u = usuarios.find(x => x.tipo === 'pai' && x.identificacao === cpf && x.senha === pass);
        
        if(u) {
            ir('painel_pais');
            const h = JSON.parse(localStorage.getItem('toctoc_historico')) || [];
            document.getElementById('lista_relatorios').innerHTML = h.reverse().map(r => `
                <div class="log-item" style="border-left-color: ${r.humor==='FELIZ'?'green':'red'};">
                    <strong>${r.data}</strong><br>
                    Humor: ${r.humor} | Detalhe: ${r.detalhe}
                </div>
            `).join('');
        } else alert("CPF ou Senha inválidos.");
    }

    function setHumor(h) { 
        tempRelato = { data: new Date().toLocaleString(), humor: h }; 
        ir(h === 'FELIZ' ? 'motivo_feliz' : 'motivo_triste'); 
    }

    function setAgente(o, p) { tempRelato.ocorrencia = o; ir(p); }
    function setSentimentoCorpo(a) { tempRelato.agente = a; ir('tela_corpo'); }

    function finalizarRelato(d) {
        tempRelato.detalhe = d;
        let h = JSON.parse(localStorage.getItem('toctoc_historico')) || [];
        h.push(tempRelato);
        localStorage.setItem('toctoc_historico', JSON.stringify(h));
        alert("Relato do Tatu enviado!"); 
        ir('painel_pais'); // Volta para o painel do pai
    }

    function acessarAcompanhamento() {
        const cpf = document.getElementById('prof_login_cpf').value;
        const pass = document.getElementById('prof_login_senha').value;
        const u = (JSON.parse(localStorage.getItem('toctoc_usuarios')) || []).find(x => x.tipo === 'prof' && x.identificacao === cpf && x.senha === pass);
        if(u) ir('tela_acompanhamento'); else alert("Acesso restrito a profissionais.");
    }

    function salvarAcompanhamento() {
        let naoSei = 0;
        ['obs_isolamento', 'obs_hiper', 'obs_desafiador'].forEach(id => {
            if(document.getElementById(id).value === 'Não sei') naoSei++;
        });
        if(naoSei >= 2) ir('tela_alerta_prof');
        else { alert("Dados salvos!"); ir('menu'); }
    }

    function acessarAdmin() {
        if(document.getElementById('admin_key').value === '123Pin567Pin') {
            ir('painel_admin');
            const d = JSON.parse(localStorage.getItem('toctoc_usuarios')) || [];
            document.querySelector('#tabela_admin tbody').innerHTML = d.map(u => `<tr><td>${u.tipo.toUpperCase()}</td><td>${u.nome}</td><td>${u.identificacao}</td></tr>`).join('');
        }
    }
</script>
</body>
</html>
